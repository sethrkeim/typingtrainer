{"ast":null,"code":"var _jsxFileName = \"/Users/Seth/Documents/projects/typing_trainer/src/test.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport { TextField } from '@material-ui/core';\nimport { Button } from '@material-ui/core';\nexport default class Test extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      fetch('/dictFreq.tsv').then(r => r.text()).then(text => {\n        var all = [];\n        var data = text.split('\\n');\n\n        for (var i = 0; i < data.length; i++) {\n          var line = data[i].split('\\t');\n\n          try {\n            var w = line[1].split(\"\");\n            all.push({\n              word: line[1].split(\"\"),\n              freq: line[2]\n            });\n          } catch {\n            console.log('couldn\\'t split: ' + line[1]);\n          }\n        }\n\n        this.setState({\n          all: all\n        }, this.newWord(all));\n      });\n      document.getElementById(\"filled-basic\").focus();\n    };\n\n    this.newWord = all => {\n      var num = Math.floor(Math.random() * all.length);\n      console.log(num);\n      console.log(all[num]);\n      this.setState({\n        word: all[num]['word']\n      }, function () {\n        var c = [];\n\n        for (var i = 0; i < this.state.word.length; i++) {\n          c.push(\"black\");\n        }\n\n        this.setState({\n          correct: c\n        });\n      }); // var time = new Date();\n      // var times = this.state.times\n      // if(this.state.prev == 0){\n      //   // do nothing\n      // } else {\n      //   var t1 = time.getTime()\n      //   times.push(t1 - this.state.prev)\n      //   this.setState({\n      //     prev: t1,\n      //     times: times\n      //   });\n      // }\n\n      var times = this.state.times;\n      var count = 0;\n      console.log(times);\n\n      for (var i = 0; i < times.length; i++) {\n        for (var j = 0; j < times[i].length; j++) {\n          count = count + times[i][j];\n        }\n      }\n\n      var mean = count / times.length / 1000;\n      this.setState({\n        avg: mean.toFixed(2)\n      });\n\n      if (times.length == this.props.num) {\n        this.setState({\n          stats: true\n        });\n        this.setHtml();\n      }\n    };\n\n    this.onKey = e => {\n      console.log('in key');\n\n      if (e.keyCode != 8 && e.keyCode != 46) {\n        var time = new Date();\n        var t1 = time.getTime();\n        var times = this.state.times;\n\n        if (this.state.prev == 0) {\n          times.push([]);\n        } else {\n          console.log(e.key);\n          var cs = this.charstats;\n          var p = this.state.prev;\n\n          if (e.key in cs) {\n            var char = cs[e.key];\n            char.push(t1 - p);\n            cs[e.key] = char;\n          } else {\n            cs[e.key] = [t1 - p];\n          }\n\n          this.charstats = cs;\n\n          if (this.state.text.length == 0) {\n            times.push([t1 - p]);\n          } else {\n            times[this.state.times.length - 1].push(t1 - p);\n          }\n        }\n\n        console.log(this.charstats);\n        this.setState({\n          prev: t1\n        });\n        var t = this.state.text;\n        var c = this.state.correct;\n\n        if (e.key == this.state.word[t.length]) {\n          c[t.length] = \"green\";\n          this.setState({\n            text: t + e.key\n          });\n        }\n\n        if (!c.includes(\"black\") && !c.includes(\"red\")) {\n          this.newWord(this.state.all);\n          this.setState({\n            text: '',\n            correct: c\n          });\n        }\n      }\n    };\n\n    this.findMean = array => {\n      var sum = 0;\n\n      for (var i = 0; i < array.length; i++) {\n        sum = sum + array[i];\n      }\n\n      return (sum / array.length).toFixed(2);\n    };\n\n    this.setHtml = () => {\n      var dict = this.charstats;\n      var newDict = {};\n\n      for (var key in dict) {\n        newDict[key] = this.findMean(dict[key]);\n      }\n\n      console.log(newDict);\n      var sorted = this.sortJsObject(newDict);\n      console.log('new dict');\n      console.log(newDict);\n      var h = '';\n      sorted.map((element, index) => {\n        h = h + `<p>${element[0]}: ${element[1]}</p>`;\n      });\n      this.setState({\n        charhtml: h\n      });\n    };\n\n    this.sortJsObject = dict => {\n      var keys = [];\n\n      for (var key in dict) {\n        keys[keys.length] = key;\n      }\n\n      var values = [];\n\n      for (var i = 0; i < keys.length; i++) {\n        values[values.length] = dict[keys[i]];\n      }\n\n      var sortedValues = values.sort(this.sortNumber);\n      console.log(sortedValues);\n      var sorted = [];\n\n      for (var i = 0; i < sortedValues.length; i++) {\n        for (var k in dict) {\n          if (dict[k] == sortedValues[i]) {\n            sorted.push([k, sortedValues[i]]);\n          }\n        }\n      }\n\n      return sorted;\n    };\n\n    this.sortNumber = (a, b) => {\n      return a - b;\n    };\n\n    this.charstats = {};\n    this.state = {\n      all: [],\n      word: [],\n      correct: [],\n      text: '',\n      times: [],\n      prev: 0,\n      avg: 0,\n      stats: false,\n      charhtml: '<></>'\n    };\n  }\n\n  render() {\n    var checker = this.state.word.map((element, index) => {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        id: `let${index + 1}`,\n        style: {\n          color: this.state.correct[index],\n          display: 'inline-block'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 7\n        }\n      }, element);\n    }); // if(this.state.stats) {\n    //   var newDict = {};\n    //   for(var key in dict) {\n    //     var count = 0;\n    //     for(var i = 0; i < dict[key].length; i++) {\n    //       count = count + dict[key][i];\n    //     }\n    //     count = (count / dict[key].length).toFixed(2);\n    //     newDict[key] = count;\n    //   }\n    //   newDict = sortJsObject(newDict);\n    //   console.log(newDict);\n    //   var characterstats = Object.getOwnPropertyNames(newDict).map(function(key) {\n    //     return (\n    //       <p>{key}: {newDict[key]}</p>\n    //     );\n    //   });\n    // }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      onClick: this.props.changeDisplay,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }\n    }, \"Back\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        margin: 'auto'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }\n    }, !this.state.stats && /*#__PURE__*/React.createElement(React.Fragment, null, checker, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      style: {\n        color: 'white'\n      },\n      id: \"filled-basic\",\n      label: \"text\",\n      multiline: true // onChange={this.change}\n      ,\n      onKeyDown: this.onKey,\n      rows: 4,\n      variant: \"filled\",\n      value: this.state.text,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }\n    })), this.state.stats && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 11\n      }\n    }, \"Results: \")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 13\n      }\n    }, \"Seconds per word:\", this.state.avg), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 13\n      }\n    }, \"Words per minute:\", (60 / this.state.avg).toFixed(2)), this.state.stats && /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: this.state.charhtml\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/Seth/Documents/projects/typing_trainer/src/test.js"],"names":["React","TextField","Button","Test","Component","constructor","props","componentDidMount","fetch","then","r","text","all","data","split","i","length","line","w","push","word","freq","console","log","setState","newWord","document","getElementById","focus","num","Math","floor","random","c","state","correct","times","count","j","mean","avg","toFixed","stats","setHtml","onKey","e","keyCode","time","Date","t1","getTime","prev","key","cs","charstats","p","char","t","includes","findMean","array","sum","dict","newDict","sorted","sortJsObject","h","map","element","index","charhtml","keys","values","sortedValues","sort","sortNumber","k","a","b","render","checker","color","display","changeDisplay","margin","__html"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport { TextField } from '@material-ui/core'\nimport { Button } from '@material-ui/core'\n\nexport default class Test extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.charstats = {};\n\n\n    this.state = ({\n      all: [],\n      word: [],\n      correct: [],\n      text: '',\n      times: [],\n      prev: 0,\n      avg: 0,\n      stats: false,\n      charhtml: '<></>',\n    });\n  }\n\n  componentDidMount = () => {\n    \n\n    fetch('/dictFreq.tsv')\n    .then((r) => r.text())\n    .then(text => {\n      var all = [];\n      var data = text.split('\\n');\n      for(var i = 0; i < data.length; i++) {\n        var line = data[i].split('\\t');\n        try{\n          var w = line[1].split(\"\");\n          all.push({\n            word: line[1].split(\"\"),\n            freq: line[2]\n          })\n        } catch {\n          console.log('couldn\\'t split: ' + line[1])\n        }\n        \n      }\n      this.setState({\n        all: all\n      }, this.newWord(all))\n    });\n\n    document.getElementById(\"filled-basic\").focus()\n  }\n\n  newWord = (all) => {\n    \n    var num = Math.floor(Math.random() * all.length);\n    console.log(num)\n    console.log(all[num])\n    this.setState({\n      word: all[num]['word']\n    }, function() {\n      var c = []\n      for(var i = 0; i < this.state.word.length; i++) {\n        c.push(\"black\")\n      }\n      this.setState({\n        correct: c\n      });\n    });\n\n    // var time = new Date();\n    // var times = this.state.times\n    // if(this.state.prev == 0){\n    //   // do nothing\n    // } else {\n    //   var t1 = time.getTime()\n    //   times.push(t1 - this.state.prev)\n    //   this.setState({\n    //     prev: t1,\n    //     times: times\n    //   });\n    // }\n    var times = this.state.times\n    var count = 0;\n    console.log(times)\n    for(var i = 0; i < times.length; i++) {\n      for(var j = 0; j < times[i].length; j++) {\n        count = count + times[i][j];\n      }\n    }\n    var mean = ((count / times.length) / 1000);\n    \n    this.setState({\n      avg: mean.toFixed(2)\n    });\n    \n    if(times.length == this.props.num) {\n      this.setState({\n        stats: true\n      })\n      this.setHtml();\n    }\n  }\n\n\n\n  onKey = (e) => {\n    \n    console.log('in key')\n    if(e.keyCode != 8 && e.keyCode != 46) {\n      var time = new Date();\n      var t1 = time.getTime();\n      var times = this.state.times;\n      if(this.state.prev == 0) {\n        times.push([])\n      } else {\n        console.log(e.key);\n        var cs = this.charstats\n        var p = this.state.prev;\n        if(e.key in cs) {\n          var char = cs[e.key];\n          char.push(t1-p);\n          cs[e.key] = char\n        } else {\n          cs[e.key] = [t1-p]\n        }\n        this.charstats = cs;\n        \n        if(this.state.text.length == 0) {\n          times.push([t1-p]);\n        } else {\n          times[this.state.times.length-1].push(t1-p)\n        }\n        \n      }\n      console.log(this.charstats)\n      this.setState({\n        prev: t1\n      })\n      var t = this.state.text\n      \n      var c = this.state.correct;\n      if(e.key == this.state.word[t.length]) {\n        c[t.length] = \"green\"\n        this.setState({\n          text: t+e.key\n        });\n      } \n    \n   \n    \n      if(!c.includes(\"black\") && !c.includes(\"red\")) {\n        this.newWord(this.state.all)\n        this.setState({\n          text: '',\n          correct: c\n        })\n      }\n    }\n  }\n    \n\n  findMean = (array) => {\n    var sum = 0;\n    for(var i = 0; i < array.length; i++) {\n      sum = sum + array[i];\n    }\n    return (sum / array.length).toFixed(2);\n  }\n\n  setHtml = () => {\n    var dict = this.charstats;\n    var newDict = {}\n    for(var key in dict) {\n      newDict[key] = this.findMean(dict[key]);\n    }\n    console.log(newDict)\n    var sorted = this.sortJsObject(newDict);\n    console.log('new dict')\n    console.log(newDict)\n    var h = ''\n    sorted.map((element, index) => {\n      h = h + `<p>${element[0]}: ${element[1]}</p>`\n    })\n    this.setState({\n      charhtml: h\n    })\n  }\n\n  sortJsObject = (dict) => {\n      \n    var keys = [];\n    for(var key in dict) { \n      keys[keys.length] = key;\n    }\n\n    var values = [];     \n    for(var i = 0; i < keys.length; i++) {\n      values[values.length] = dict[keys [i]];\n    }\n\n    var sortedValues = values.sort(this.sortNumber);\n    console.log(sortedValues);\n\n    var sorted = []\n    for(var i = 0; i < sortedValues.length; i++) {\n      for(var k in dict) {\n        if(dict[k] == sortedValues[i]) {\n          sorted.push([k, sortedValues[i]])\n        }\n      }\n    }\n    return sorted;\n  } \n\n  // this is needed to sort values as integers\n  sortNumber = (a,b) => {\n    return a - b;\n  }\n\n\n  render() {\n    \n    var checker = this.state.word.map((element, index) => {\n      return(\n      <p\n      id={`let${index + 1}`}\n      style={{color: this.state.correct[index], display: 'inline-block'}}>\n        {element}\n      </p>\n      );\n    })\n  \n    \n\n\n    \n    \n    \n    // if(this.state.stats) {\n    //   var newDict = {};\n    //   for(var key in dict) {\n    //     var count = 0;\n    //     for(var i = 0; i < dict[key].length; i++) {\n    //       count = count + dict[key][i];\n    //     }\n    //     count = (count / dict[key].length).toFixed(2);\n    //     newDict[key] = count;\n    //   }\n    //   newDict = sortJsObject(newDict);\n    //   console.log(newDict);\n    //   var characterstats = Object.getOwnPropertyNames(newDict).map(function(key) {\n        \n    //     return (\n    //       <p>{key}: {newDict[key]}</p>\n    //     );\n    //   });\n    // }\n    \n    return (\n        <>\n        <Button variant=\"contained\" onClick={this.props.changeDisplay}>Back</Button>\n        \n        <div style={{margin: 'auto'}}>\n        {!this.state.stats && \n        <>\n          {checker}\n          <br />\n          <TextField \n            style={{ color: 'white' }} \n            id=\"filled-basic\" \n            label=\"text\" \n            multiline\n            // onChange={this.change}\n            onKeyDown={this.onKey}\n            rows={4}\n            variant=\"filled\"\n            value={this.state.text}\n            />\n            </>\n          }\n          {this.state.stats &&\n          <>\n          <p>Results: </p>\n          \n          </>\n          }\n            <p>\n              Seconds per word: \n              {this.state.avg}\n            </p>\n            <p>\n              Words per minute:\n              {(60 / this.state.avg).toFixed(2)}\n            </p>\n            {this.state.stats &&\n            <div dangerouslySetInnerHTML={{ __html: this.state.charhtml }} />\n            }\n          \n        </div>\n        \n        \n        </>\n    );\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}